
<!DOCTYPE html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
<meta name="color-scheme" content="light dark">
<meta http-equiv="Access-Control-Allow-Origin" content="*">
<style type="text/css">
	a {
		color: #50aaef;
		text-decoration: none;
		background-color: #fff7c3;
	}

	mark {
		background-color: #fff7c3;
	}

	ul {
		list-style-type: disc;
	}

	ul li::marker,
	ol li::marker {
		color: #b0b7bf;
	}

	img,
	embed,
	iframe {
		width: 100%;
	}
	textarea {
		font-size: 0.8rem;
		letter-spacing: 1px;
	}

	textarea {
		padding: 10px;
		max-width: 100%;
		border-radius: 5px;
		border: 1px solid #ccc;
		box-shadow: 1px 1px 1px #999;
	}
</style>
<script>
function Engines(Enjoy){
	const base=document.body,val=()=>document.getElementsByClassName("EnginesContent")[document.getElementsByClassName("EnginesContent").length-1].value;
	function newarea(value,target=Engines("base")){
		let Content=document.createElement("textarea");
		Content.className="EnginesContent";
		Content.value = value;
		target.appendChild(Content);
		return Content;
	}
	function upload(target=Engines("base")){
		let uploader=document.createElement("input");
		uploader.type="file";
		uploader.name="file";
		uploader.onchange=()=>{
			const isimage=/image/i.test(uploader.files[0].type);
			let Reader = new FileReader();
			Reader.onload = (isimage)?
				() => {
					let preview = document.createElement("img");
					preview.src = Reader.result;
					target.appendChild(preview);
				}:
				() => {Engines("newarea")(Reader.result,target)};
			if(isimage){
				Reader.readAsDataURL(uploader.files[0]);
			} else {
				Reader.readAsText(uploader.files[0]);
			}
		}
		uploader.click();
	}
	function download(name,obj=Engines("val")()){
		let Anchor = document.createElement("a");
		Anchor.href = window.URL.createObjectURL(new Blob([obj]));
		Anchor.download = name;
		Anchor.target ="_blank";
		Anchor.click();
	}
	function give(obj=Engines("val")(),port=3000){
		let giver = new FormData();
		giver.append("file", new File([obj], "foo.txt", {type: "text/plain",}));
		let request = new XMLHttpRequest();
		request.open("POST", `http://0.0.0.0:${port}/upload`);
		request.send(giver);
		return request;
	}
	function newopen(obj){
		let neWindow=window.open();
		neWindow.opener = null;
		neWindow.document.write(obj);
		neWindow.document.close();
	}
	function insert(elements=Engines("val")(),target=Engines("base")){
		let Inserter=document.createElement("div");
		Inserter.innerHTML = elements;
		target.appendChild(Inserter);
		Engines("scriptfinder")(Inserter);
	}
	function scriptfinder(obj){
		for(let i of obj.children){
			if(i.tagName=='SCRIPT'){
				let g = document.createElement("script");
				g.text = i.innerHTML;
				if(i.src!=''){
					g.src=i.src;
					g.charset = i.charset;
					g.async=i.async;
					g.defer=i.defer;
				}
				i.before(g);
				g.remove();
			}
			scriptfinder(i);
		}
	}
	function deleted(){
		// document.querySelector('#Engines :last-child').remove();
		Engines("base").lastChild.remove();
	}
	function change(obj,target=Engines("base")) {
		target.innerHTML = "";
		Engines("insert")(obj,target);
	}
	let n=newopen,d=deleted,s=download,i=insert,up=upload;
	return eval(Enjoy);
}
let initdoc=`<textarea id="Enjoy" cols="40%" rows="24"></textarea><br />
<button type="button" onclick="Engines(document.getElementById('Enjoy').value)">enjoy!</button>
<ul>
<li><a href="./index.html#read%20board">read board</a></li>
<li><a href="./index.html">index.html</a></li>
<li><a href="javascript:Engines('change')(musicdoc)">xcvyu-music</a></li>
<li><a href="javascript:Engines('change')(feeddoc)">xcvyu-feed</a></li>
<li><a href="https://pwa.sspai.com/">sspai</a></li>
</ul>`
window.onload=()=>Engines("change")(initdoc);
</script>
<script src="./template.js"></script>
</head>
<body></body>